{"version":3,"sources":["../../src/user/email.js"],"names":["AWS_KEY","aws","accessKeyId","AWS_SECRET","secretKey","AWS_SES_SENDER","SESserver","createClient","key","secret","Email","send","obj","Promise","resolve","reject","sendEmail","from","err","data","to"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,UAAS,iBAAOC,GAAP,CAAWC,WAA1B;AACA,IAAMC,aAAW,iBAAOF,GAAP,CAAWG,SAA5B;AACA,IAAMC,iBAAe,oBAArB;;AAEA,IAAIC,YAAY,kBAAIC,YAAJ,CAAiB;AAC/BC,OAAKR,OAD0B;AAE/BS,UAAQN;AAFuB,CAAjB,CAAhB;;AAKA,IAAMO,QAAQ;AACZC,QAAM,cAACC,GAAD,EAAS;AACb,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCT,gBAAUU,SAAV;AACEC,cAAMZ;AADR,SAEKO,GAFL,GAGG,UAASM,GAAT,EAAcC,IAAd,EAAoB;AACrB,YAAID,GAAJ,EAAS,OAAOH,OAAOG,GAAP,CAAP;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAJ,gBAAQF,IAAIQ,EAAZ;AACD,OAvBD;AAwBD,KAzBM,CAAP;AA0BD;AA5BW,CAAd;;kBA+BeV,K;;AAGf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"email.js","sourcesContent":["import ses from 'node-ses';\nimport config from '../config';\n\nconst AWS_KEY= config.aws.accessKeyId;\nconst AWS_SECRET=config.aws.secretKey;\nconst AWS_SES_SENDER='team@revieweer.com';\n\nvar SESserver = ses.createClient({\n  key: AWS_KEY,\n  secret: AWS_SECRET\n})\n\nconst Email = {\n  send: (obj) => {\n    return new Promise((resolve, reject) => {\n      SESserver.sendEmail({\n        from: AWS_SES_SENDER, \n        ...obj\n      }, function(err, data) {\n        if (err) return reject(err);\n        // console.log('ses', data);\n        \n        // Error { \n        //  Type: 'Sender',\n        //  Code: 'MessageRejected',\n        //  Message: 'Email address is not verified. The following identities failed the check in region US-EAST-1: amazingandyyy@gmail.com' \n        // }\n        \n        // Good \n        // <SendEmailResponse xmlns=\"http://ses.amazonaws.com/doc/2010-12-01/\">\n        //   <SendEmailResult>\n        //     <MessageId>0100016193380f61-95eef9bc-018c-49dd-8fd0-18e46455a347-000000</MessageId>\n        //   </SendEmailResult>\n        //   <ResponseMetadata>\n        //     <RequestId>d1584fef-1158-11e8-962a-15378f5aaf10</RequestId>\n        //   </ResponseMetadata>\n        // </SendEmailResponse>\n        resolve(obj.to);\n      })\n    })\n  }\n}\n\nexport default Email;\n\n\n// const mailObj = {\n//   to: 'amazingandyyy@gmail.com',\n//   subject: '[Revieweer]Welcome and Account Activation.',\n//   message: `<b>Welcome to join Revieweer,</b> <br/><br/><br/>\n//   Please click <a href='${'deepLink'}' target='_blank'>here</a> to your activate your account.\n//   <br/>\n//   Enjoy of being a revieweer:\n//   <br/>\n//   <ul>\n//     <li>Explore: explore new products to try.</li>\n//     <li>Review: amazing review with photo to help business grow</li>\n//     <li>Earn: we pay you up to 100% cashback + cash rewards</li>\n//   </ul>\n//   <br/>\n//   The best, Revieweer Team.`\n// };\n// SES.send(mailObj).then(email=>{\n//   console.log(email)\n// }).catch(err=>{\n//   console.log(err);\n// });\n"]}